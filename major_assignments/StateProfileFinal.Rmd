---
title: "State Profile Final"
output: html_document
date: "2022-11-30"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r}
library('tidyverse')
library('janitor')
library('lubridate')
library('refinr')
```


My state: MI (Michigan)

Democratic Party ID: C00031054

Republican Party ID: C00041160

Data: MIindividualContri.csv 

**Using receipts because he said that the individual contributions would be in the receipts. Check back on Dec. 8 for updated data. 
For spending, I used the disbursements data. 

```{r}
MIDemRecipts <- read_csv("StatesData/MiDemAllRecipts.csv")
MIRepRecipts <- read_csv("StatesData/MIRepAllRecipts.csv")
MiRepSepnding <- read_csv("StatesData/MIRepRefSpending-csv.csv")
MiDemSpending <- read_csv("StatesData/MiDemRefSpending-csv.csv")
```
-How can you describe (broadly) the partyâ€™s donors? Where do the parties get their money and from what kinds of donors? Do they raise a lot in small amounts or from out of state donors?

-What did the party spend its money on? You may need OpenRefine to help you standardize the purpose of spending. Can you tell much about the strategy behind the spending from the data?

-When you compare the two parties, where are the differences and similarities?

-What about either the donors or the spending prompts further questions from you?

Recipts:
committee_name_2
report_year
entity_type_desc- Filter for individual donnations. 
contributor_first_name
contributor_last_name
contributor_street_1
contributor_city
contributor_state
contributor_employer
contributor_occupation
contribution_receipt_date
contribution_receipt_amount

#Organizing and cleaning Michigan Democratic recipts:

```{r}
CleanMIDemR <- MIDemRecipts %>% 
  clean_names() %>% 
  select(committee_name_2,contributor_name,report_year,entity_type_desc,contributor_street_1,contributor_city,contributor_state,contributor_employer,contributor_occupation, contribution_receipt_date,contribution_receipt_amount ) %>% 
  group_by(contribution_receipt_amount) %>% 
  arrange(desc(contribution_receipt_amount))
```

#What entity made the most contributions to the Michigan Democratic Party:

```{r}
MostContribsDem <- CleanMIDemR %>% 
  group_by(contributor_name) %>% 
summarise(count=n()
) %>%
  arrange(desc(count))
```

#Who donated the most money to the Michgan Democratic Party?

```{r}
MoneyMostDem <- CleanMIDemR %>% 
  group_by(contributor_name) %>% 
  summarise(total= sum(contribution_receipt_amount)
) %>%
  arrange(desc(total)) %>% 
  distinct()
```

#Which individual donated the most money to the Democratic Party?

```{r}
DemTopIndiContrib <- CleanMIDemR %>% 
  filter(entity_type_desc == "INDIVIDUAL") %>% 
  group_by(contributor_name, contributor_state) %>% 
  summarise(total= sum(contribution_receipt_amount)
) %>%
  arrange(desc(total)) %>% 
  distinct()
```

#Which type of entity is donating most of the money for the Democratic Party?
```{r}
DonatingMostDem <- CleanMIDemR %>% 
  group_by(entity_type_desc) %>% 
  summarise(total= sum(contribution_receipt_amount)
) %>%
   mutate(percent = (total/10382351)*100) %>% 
  arrange(desc(total))
```

#Which type of entity made the most number donations to the Democratic Party? (Not amount of money) -Why are there more categories for the Republicans than the Democrats?

```{r}
EntityDonationDem <- CleanMIDemR %>% 
  group_by(entity_type_desc) %>% 
summarise(count=n()
) %>%
  arrange(desc(count))
```

#What was the was the smallest amount given? --- Does negative money mean organization had to take their money back because they contributed over the limit?

```{r}
BottomAmountDem <- CleanMIDemR %>% 
  group_by(contribution_receipt_amount) %>% 
  arrange((contribution_receipt_amount))
```

***Could filter contribution amounts for a certain price number to see if most of the donations are small or bigger. 

#Organizing and Cleaning Michigan Republican recipts:

```{r}
CleanMIRepR <- MIRepRecipts %>% 
  clean_names() %>% 
  select(committee_name_2,contributor_name,report_year,entity_type_desc,contributor_street_1,contributor_city,contributor_state,contributor_employer,contributor_occupation, contribution_receipt_date,contribution_receipt_amount ) %>% 
  group_by(contribution_receipt_amount) %>% 
  arrange(desc(contribution_receipt_amount))
CleanMIRepR
```

#What entity type is donating the most money to the Republican Party? 

```{r}
DonatingMostRep <- CleanMIRepR %>% 
  group_by(entity_type_desc) %>% 
  summarise(total= sum(contribution_receipt_amount)
) %>%mutate(percent = (total/2520106)*100) %>% 
  arrange(desc(total))
```

#What entity gave the most contributions Michigan Republican Party?

```{r}
MostContribsRep <- CleanMIRepR %>% 
  group_by(contributor_name) %>% 
summarise(count=n()
) %>%
  arrange(desc(count))
```

#Which type of entity made the most number donations to the Republican Party? (Not amount of money)

```{r}
EntityDonationRep <- CleanMIRepR %>% 
  group_by(entity_type_desc) %>% 
summarise(count=n()
) %>%
  arrange(desc(count))
```

#Who donated the most money to the Michigan Republican Party?

```{r}
MoneyMostRep <-CleanMIRepR  %>% 
  group_by(contributor_name) %>% 
  summarise(total= sum(contribution_receipt_amount)
) %>%
  arrange(desc(total)) %>% 
   distinct()
```

#What individual gave the most money to the Michigan Republican Party

```{r}
RepTopIndiContrib <- CleanMIRepR %>% 
  filter(entity_type_desc == "INDIVIDUAL") %>% 
  group_by(contributor_name,contributor_state) %>% 
  summarise(total= sum(contribution_receipt_amount)
) %>%
  arrange(desc(total)) %>% 
  distinct()
```

#Just Democratic Individual Contributions from recipts

```{r}
DemIndiContribs <- CleanMIDemR %>% 
  filter(entity_type_desc == "INDIVIDUAL")
```

#Just Republican Individual Contributions from recipts

```{r}
RepIndiContribs <- CleanMIRepR %>% 
    filter(entity_type_desc == "INDIVIDUAL")
```

#What state donated the most to each party?

```{r}
StateDem <- CleanMIDemR %>% 
  group_by(contributor_state)%>% 
  summarise(total= sum(contribution_receipt_amount)
) %>%
  arrange(desc(total))
```

```{r}
StateRep <-CleanMIRepR %>% 
  group_by(contributor_state)%>% 
  summarise(total= sum(contribution_receipt_amount)
) %>%
  arrange(desc(total))
```




#What is the total amount of money donated to each party?

```{r}
TotalContirbDem <- CleanMIDemR %>% 
  group_by(committee_name_2) %>% 
  summarise(total_amount = sum(contribution_receipt_amount))

TotalContribRep <- CleanMIRepR %>% 
  group_by(committee_name_2) %>% 
  summarise(total_amount = sum(contribution_receipt_amount))
```

#Are most donations in small chunks or big per party? 

```{r}
DemChunks <- CleanMIDemR %>% 
  group_by(contribution_receipt_amount) %>% 
summarise(count=n()) %>%
  arrange(desc(count))

RepChunks <- CleanMIRepR %>% 
  group_by(contribution_receipt_amount) %>% 
summarise(count=n()) %>%
  arrange(desc(count))
```


#Spending --- Ask questions about standardizing fundraising....specifically for republicans. 

#Cleaning and organizing spending Democratic Data

I don't know what fec election columns mean.

```{r}
CleanMiDemSpend <- MiDemSpending %>% 
  clean_names() %>% 
  select(committee_name,report_year,entity_type_desc,recipient_name,recipient_state,beneficiary_committee_name, disbursement_type_description, disbursement_description, disbursement_date, disbursement_amount, fec_election_type_desc,fec_election_year, or_disbursement_description) %>% 
  group_by(disbursement_amount) %>% 
  mutate(disbursement_description = case_when(disbursement_description == "GOTV EVENT ENTERTAINMENT" ~ "GOTV", disbursement_description == "PAYROLL PROCESSING FEES" ~ "PAYROLL FEES", disbursement_description == "GOTV RALLY" ~ "GOTV", disbursement_description == "STAC SERVICES" ~ "STAC LAB SERVICES", disbursement_description == "GOTV ADS - NOT CANDIDATE RELATED" ~ "GOTV", TRUE ~ disbursement_description)) %>% 
  arrange(desc(disbursement_amount))
```

#Who did most of the Democratic money go to? What was the reason of the transaction?

```{r}
TopRecieverDem <- CleanMiDemSpend %>% 
  group_by(recipient_name,disbursement_description, or_disbursement_description) %>% 
  summarise(total= sum(disbursement_amount)
) %>%
  arrange(desc(total)) %>% 
  distinct()
```

#What transaction type was most of the money spent on for the Democratic Party?-- May need OpenRefine...or string detect.

```{r}
TransTypeDem <- CleanMiDemSpend %>% 
  group_by(disbursement_description) %>% 
  summarise(total= sum(disbursement_amount)
) %>% mutate(percent = (total/5026673)*100) %>% 
  arrange(desc(total)) %>% 
  distinct()
```


#Cleaning and organizing republican spending data.

```{r}
CleanMiRepSpend <- MiRepSepnding %>% 
  clean_names() %>% 
  select(committee_name,report_year,entity_type_desc,recipient_name,recipient_state,beneficiary_committee_name, disbursement_type_description, disbursement_description, disbursement_date, disbursement_amount, fec_election_type_desc,fec_election_year, or_disbursement_description) %>% 
  group_by(disbursement_amount) %>% 
  mutate(disbursement_description = case_when(disbursement_description == "CC Processing Fee" ~ "CC Processing Fees",disbursement_description == "FOOD FOR FUNDRAISING MEETING- NON CAND." ~ "FOOD", disbursement_description == "FOOD FOR MEETING- VOTER ID/NON CAND." ~ "FOOD",disbursement_description == "FOOD FOR VOLUNTEERS- VOTER ID/NON CAND." ~ "FOOD", disbursement_description == "MILEAGE REIMBURSEMENT-VOTER ID/NON CAND." ~ "MILEAGE REIMBURSEMENT", disbursement_description == "CATERING FOR FUNDRAISING EVENT-NON CAND." ~ "FOOD",disbursement_description == "MILEAGE REIMBURSEMENT- VOTER ID/NON CAND.
" ~ "REIMBURSEMENT", disbursement_description == "ONLINE FUNDRAISING FEE - NON CAND." ~ "ONLINE FUNDRAISING FEE- NON CAND.", disbursement_description == "MILEAGE REIMBURSEMENT" ~ "REIMBURSEMENT", disbursement_description == "FOOD FOR STAFF" ~ "FOOD", disbursement_description == "REFUND OF  CONTRIBUTION" ~ "REFUNDS", disbursement_description == "REFUND OF 9.9.2020 DONATION" ~ "REFUNDS", disbursement_description == "SALARY" ~ "SALARIES", disbursement_description == "FOOD FOR FUNDRAISING EVENT-NON CAND." ~ "FOOD", disbursement_description == "ONLINE FUNDRAISING FEE NON CAND." ~ "ONLINE ADVERTISING-NON CAND.", TRUE ~ disbursement_description)) %>% 
  arrange(desc(disbursement_amount))
```

#Who did most of the Republican money go to? What was the reason for the transaction? 
```{r}
TopRepReciever <- MiRepSepnding %>% 
  group_by(recipient_name,disbursement_description, Or_disbursement_description) %>% 
  summarise(total= sum(disbursement_amount)
) %>%
  arrange(desc(total)) %>% 
  distinct()
```

#What transaction type was most of the money spent on for the Republican Party?-- May need OpenRefine...or string detect
```{r}
TransTypeRep <- CleanMiRepSpend %>% 
  group_by(disbursement_description) %>% 
  summarise(total= sum(disbursement_amount)
) %>%mutate(percent = (total/1427744)*100) %>% 
  arrange(desc(total)) %>% 
  distinct()
```

#Who spent more overall, Democrats or Republicans? 

# Total Democratic Spending

```{r}
OverSpendDem <- CleanMiDemSpend %>% 
  group_by(committee_name) %>% 
  summarise(total_amount = sum(disbursement_amount))
OverSpendDem
```

#Total Republican Spending

```{r}
OverSpendRep <- CleanMiRepSpend %>% 
  group_by(committee_name) %>% 
  summarise(total_amount = sum(disbursement_amount))
OverSpendRep
```

